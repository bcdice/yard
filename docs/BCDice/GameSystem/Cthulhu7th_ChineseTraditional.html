<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: BCDice::GameSystem::Cthulhu7th_ChineseTraditional
  
    &mdash; Documentation by YARD 0.9.26
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "BCDice::GameSystem::Cthulhu7th_ChineseTraditional";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../BCDice.html" title="BCDice (module)">BCDice</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../GameSystem.html" title="BCDice::GameSystem (module)">GameSystem</a></span></span>
     &raquo; 
    <span class="title">Cthulhu7th_ChineseTraditional</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: BCDice::GameSystem::Cthulhu7th_ChineseTraditional
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></li>
          
            <li class="next">BCDice::GameSystem::Cthulhu7th_ChineseTraditional</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb</dd>
  </dl>
  
</div>


  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="ID-constant" class="">ID =
          <div class="docstring">
  <div class="discussion">
    
<p>ゲームシステムの識別子</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Cthulhu7th:ChineseTraditional</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="NAME-constant" class="">NAME =
          <div class="docstring">
  <div class="discussion">
    
<p>ゲームシステム名</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>克蘇魯神話第7版</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="SORT_KEY-constant" class="">SORT_KEY =
          <div class="docstring">
  <div class="discussion">
    
<p>ゲームシステム名の読みがな</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>国際化:Chinese Traditional:克蘇魯神話第7版</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="HELP_MESSAGE-constant" class="">HELP_MESSAGE =
          <div class="docstring">
  <div class="discussion">
    
<p>ダイスボットの使い方</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='heredoc_beg'>&lt;&lt;~INFO_MESSAGE_TEXT</span>
<span class='tstring_content'>  ・判定　CC(x)&lt;=（目標値）
</span><span class='tstring_content'>  　x：獎勵骰/懲罰骰：Bonus/Penalty Dice (2～－2)。沒有的話可以省略。
</span><span class='tstring_content'>  　致命的失敗：Fumble／失敗：Failure／通常成功：Regular success／
</span><span class='tstring_content'>  　困難成功：Hard success／極限成功：Extreme success／
</span><span class='tstring_content'>  　決定性的成功：Critical success　自動判定。
</span><span class='tstring_content'>  例）CC&lt;=30　CC(2)&lt;=50　CC(-1)&lt;=75
</span><span class='tstring_content'>
</span><span class='tstring_content'>  ・組合判定　(CBR(x,y))
</span><span class='tstring_content'>  　進行目標値 x 和 y 的判定。
</span><span class='tstring_content'>  　例）CBR(50,20)
</span><span class='tstring_content'>
</span><span class='tstring_content'>  ・連射（Full Auto）判定　FAR(w,x,y,z)
</span><span class='tstring_content'>  　w：彈數(1～100）、x：技能値（1～100）、y：故障率
</span><span class='tstring_content'>  　z：獎勵、懲罰骰(-2～2)。可省略。
</span><span class='tstring_content'>  　只計算命中數、貫穿數及剩餘彈藥，不計算傷害。
</span><span class='tstring_content'>  例）FAR(25,70,98)　FAR(50,80,98,-1)
</span><span class='tstring_content'>
</span><span class='tstring_content'>  ・瘋狂表
</span><span class='tstring_content'>  ・實時型　Short／總結型　Longer
</span><span class='heredoc_end'>INFO_MESSAGE_TEXT</span></pre></dd>
      
    </dl>
  






  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Base.html#d66_sort_type-instance_method" title="BCDice::Base#d66_sort_type (method)">#d66_sort_type</a></span>, <span class='object_link'><a href="../Base.html#default_cmp_op-instance_method" title="BCDice::Base#default_cmp_op (method)">#default_cmp_op</a></span>, <span class='object_link'><a href="../Base.html#default_target_number-instance_method" title="BCDice::Base#default_target_number (method)">#default_target_number</a></span>, <span class='object_link'><a href="../Base.html#randomizer-instance_method" title="BCDice::Base#randomizer (method)">#randomizer</a></span>, <span class='object_link'><a href="../Base.html#reroll_dice_reroll_threshold-instance_method" title="BCDice::Base#reroll_dice_reroll_threshold (method)">#reroll_dice_reroll_threshold</a></span>, <span class='object_link'><a href="../Base.html#round_type-instance_method" title="BCDice::Base#round_type (method)">#round_type</a></span>, <span class='object_link'><a href="../Base.html#sides_implicit_d-instance_method" title="BCDice::Base#sides_implicit_d (method)">#sides_implicit_d</a></span>, <span class='object_link'><a href="../Base.html#upper_dice_reroll_threshold-instance_method" title="BCDice::Base#upper_dice_reroll_threshold (method)">#upper_dice_reroll_threshold</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eval_game_system_specific_command-instance_method" title="#eval_game_system_specific_command (instance method)">#<strong>eval_game_system_specific_command</strong>(command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getBulletResults-instance_method" title="#getBulletResults (instance method)">#<strong>getBulletResults</strong>(bullet_count, hit_type, diff)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getCheckResult-instance_method" title="#getCheckResult (instance method)">#<strong>getCheckResult</strong>(command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getCheckResultText-instance_method" title="#getCheckResultText (instance method)">#<strong>getCheckResultText</strong>(total, diff, fumbleable = false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getCombineRoll-instance_method" title="#getCombineRoll (instance method)">#<strong>getCombineRoll</strong>(command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getFullAutoResult-instance_method" title="#getFullAutoResult (instance method)">#<strong>getFullAutoResult</strong>(command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getFumbleable-instance_method" title="#getFumbleable (instance method)">#<strong>getFumbleable</strong>(more_difficlty)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getHitBulletCountBase-instance_method" title="#getHitBulletCountBase (instance method)">#<strong>getHitBulletCountBase</strong>(diff, bullet_set_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getHitResultInfos-instance_method" title="#getHitResultInfos (instance method)">#<strong>getHitResultInfos</strong>(dice_num, diff, more_difficlty)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getHitResultText-instance_method" title="#getHitResultText (instance method)">#<strong>getHitResultText</strong>(output, counts)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getHitType-instance_method" title="#getHitType (instance method)">#<strong>getHitType</strong>(more_difficlty, hit_result)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getLastHitBulletCount-instance_method" title="#getLastHitBulletCount (instance method)">#<strong>getLastHitBulletCount</strong>(bullet_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getNextDifficltyMessage-instance_method" title="#getNextDifficltyMessage (instance method)">#<strong>getNextDifficltyMessage</strong>(more_difficlty)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getSetOfBullet-instance_method" title="#getSetOfBullet (instance method)">#<strong>getSetOfBullet</strong>(diff)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getSuccessListImpaleBulletList-instance_method" title="#getSuccessListImpaleBulletList (instance method)">#<strong>getSuccessListImpaleBulletList</strong>(more_difficlty)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getTotal-instance_method" title="#getTotal (instance method)">#<strong>getTotal</strong>(total_list, bonus_dice_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getTotalLists-instance_method" title="#getTotalLists (instance method)">#<strong>getTotalLists</strong>(bonus_dice_count, units_digit)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(command)  &#x21d2; Cthulhu7th_ChineseTraditional </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Cthulhu7th_ChineseTraditional.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#isLastBulletTurn-instance_method" title="#isLastBulletTurn (instance method)">#<strong>isLastBulletTurn</strong>(bullet_count, bullet_set_count)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rollFullAuto-instance_method" title="#rollFullAuto (instance method)">#<strong>rollFullAuto</strong>(bullet_count, diff, broken_number, dice_num)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rollPercentD10-instance_method" title="#rollPercentD10 (instance method)">#<strong>rollPercentD10</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Base.html#change_text-instance_method" title="BCDice::Base#change_text (method)">#change_text</a></span>, <span class='object_link'><a href="../Base.html#check_result-instance_method" title="BCDice::Base#check_result (method)">#check_result</a></span>, <span class='object_link'><a href="../Base.html#command_pattern-class_method" title="BCDice::Base.command_pattern (method)">command_pattern</a></span>, <span class='object_link'><a href="../Base.html#enable_debug-instance_method" title="BCDice::Base#enable_debug (method)">#enable_debug</a></span>, <span class='object_link'><a href="../Base.html#enabled_d9%3F-instance_method" title="BCDice::Base#enabled_d9? (method)">#enabled_d9?</a></span>, <span class='object_link'><a href="../Base.html#eval-class_method" title="BCDice::Base.eval (method)">eval</a></span>, <span class='object_link'><a href="../Base.html#eval-instance_method" title="BCDice::Base#eval (method)">#eval</a></span>, <span class='object_link'><a href="../Base.html#grich_text-instance_method" title="BCDice::Base#grich_text (method)">#grich_text</a></span>, <span class='object_link'><a href="../Base.html#prefixes_pattern-class_method" title="BCDice::Base.prefixes_pattern (method)">prefixes_pattern</a></span>, <span class='object_link'><a href="../Base.html#register_prefix-class_method" title="BCDice::Base.register_prefix (method)">register_prefix</a></span>, <span class='object_link'><a href="../Base.html#register_prefix_from_super_class-class_method" title="BCDice::Base.register_prefix_from_super_class (method)">register_prefix_from_super_class</a></span>, <span class='object_link'><a href="../Base.html#sort_add_dice%3F-instance_method" title="BCDice::Base#sort_add_dice? (method)">#sort_add_dice?</a></span>, <span class='object_link'><a href="../Base.html#sort_barabara_dice%3F-instance_method" title="BCDice::Base#sort_barabara_dice? (method)">#sort_barabara_dice?</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Translate.html" title="BCDice::Translate (module)">Translate</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Translate.html#translate-instance_method" title="BCDice::Translate#translate (method)">#translate</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(command)  &#x21d2; <tt><span class='object_link'><a href="" title="BCDice::GameSystem::Cthulhu7th_ChineseTraditional (class)">Cthulhu7th_ChineseTraditional</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Cthulhu7th_ChineseTraditional.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>

  <span class='ivar'>@bonus_dice_range</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='op'>-</span><span class='int'>2</span><span class='op'>..</span><span class='int'>2</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="eval_game_system_specific_command-instance_method">
  
    #<strong>eval_game_system_specific_command</strong>(command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


46
47
48
49
50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 46</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eval_game_system_specific_command'>eval_game_system_specific_command</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_command'>command</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>CC</span><span class='regexp_end'>/i</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_getCheckResult'>getCheckResult</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>CBR</span><span class='regexp_end'>/i</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_getCombineRoll'>getCombineRoll</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>FAR</span><span class='regexp_end'>/i</span></span>
    <span class='kw'>return</span> <span class='id identifier rubyid_getFullAutoResult'>getFullAutoResult</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getBulletResults-instance_method">
  
    #<strong>getBulletResults</strong>(bullet_count, hit_type, diff)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 270</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getBulletResults'>getBulletResults</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_hit_type'>hit_type</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span> <span class='op'>=</span> <span class='id identifier rubyid_getSetOfBullet'>getSetOfBullet</span><span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hit_bullet_count_base'>hit_bullet_count_base</span> <span class='op'>=</span> <span class='id identifier rubyid_getHitBulletCountBase'>getHitBulletCountBase</span><span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_impale_bullet_count_base'>impale_bullet_count_base</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span> <span class='op'>/</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_lost_bullet_count'>lost_bullet_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_hit_bullet_count'>hit_bullet_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_impale_bullet_count'>impale_bullet_count</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_isLastBulletTurn'>isLastBulletTurn</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span><span class='rparen'>)</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_hit_type'>hit_type</span>
    <span class='kw'>when</span> <span class='symbol'>:hit</span>
      <span class='id identifier rubyid_hit_bullet_count'>hit_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_hit_bullet_count_base'>hit_bullet_count_base</span> <span class='comment'># 正常命中彈藥數之計算
</span>
    <span class='kw'>when</span> <span class='symbol'>:impale</span>
      <span class='id identifier rubyid_hit_bullet_count'>hit_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_impale_bullet_count_base'>impale_bullet_count_base</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
      <span class='id identifier rubyid_impale_bullet_count'>impale_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_impale_bullet_count_base'>impale_bullet_count_base</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span> <span class='comment'># 貫穿彈藥數之計算
</span>    <span class='kw'>end</span>

    <span class='id identifier rubyid_lost_bullet_count'>lost_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span>

  <span class='kw'>else</span>

    <span class='kw'>case</span> <span class='id identifier rubyid_hit_type'>hit_type</span>
    <span class='kw'>when</span> <span class='symbol'>:hit</span>
      <span class='id identifier rubyid_hit_bullet_count'>hit_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_getLastHitBulletCount'>getLastHitBulletCount</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='rparen'>)</span>

    <span class='kw'>when</span> <span class='symbol'>:impale</span>
      <span class='id identifier rubyid_halfbull'>halfbull</span> <span class='op'>=</span> <span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>/</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span>

      <span class='id identifier rubyid_hit_bullet_count'>hit_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_halfbull'>halfbull</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
      <span class='id identifier rubyid_impale_bullet_count'>impale_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_halfbull'>halfbull</span><span class='period'>.</span><span class='id identifier rubyid_ceil'>ceil</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_lost_bullet_count'>lost_bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_bullet_count'>bullet_count</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_hit_bullet_count'>hit_bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_impale_bullet_count'>impale_bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_lost_bullet_count'>lost_bullet_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getCheckResult-instance_method">
  
    #<strong>getCheckResult</strong>(command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getCheckResult'>getCheckResult</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^CC([-\d]+)?&lt;=(\d+)</span><span class='regexp_end'>/i</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_command'>command</span>
  <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='comment'># 獎勵、懲罰骰數量
</span>  <span class='id identifier rubyid_diff'>diff</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>錯誤。目標值需為1以上。</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_diff'>diff</span> <span class='op'>&lt;=</span> <span class='int'>0</span>

  <span class='kw'>unless</span> <span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>錯誤。獎勵、懲罰骰値為</span><span class='embexpr_beg'>#{</span><span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='embexpr_end'>}</span><span class='tstring_content'>～</span><span class='embexpr_beg'>#{</span><span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='embexpr_end'>}</span><span class='tstring_content'>。</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(1D100&lt;=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_diff'>diff</span><span class='embexpr_end'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> 獎勵、懲罰骰値[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_units_digit'>units_digit</span> <span class='op'>=</span> <span class='id identifier rubyid_rollPercentD10'>rollPercentD10</span>
  <span class='id identifier rubyid_total_list'>total_list</span> <span class='op'>=</span> <span class='id identifier rubyid_getTotalLists'>getTotalLists</span><span class='lparen'>(</span><span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='comma'>,</span> <span class='id identifier rubyid_units_digit'>units_digit</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_getTotal'>getTotal</span><span class='lparen'>(</span><span class='id identifier rubyid_total_list'>total_list</span><span class='comma'>,</span> <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result_text'>result_text</span> <span class='op'>=</span> <span class='id identifier rubyid_getCheckResultText'>getCheckResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_list'>total_list</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total'>total</span><span class='embexpr_end'>}</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result_text'>result_text</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getCheckResultText-instance_method">
  
    #<strong>getCheckResultText</strong>(total, diff, fumbleable = false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getCheckResultText'>getCheckResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_fumbleable'>fumbleable</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&lt;=</span> <span class='id identifier rubyid_diff'>diff</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>決定性的成功</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>極限的成功</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&lt;=</span> <span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span> <span class='op'>/</span> <span class='int'>5</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>困難的成功</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&lt;=</span> <span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span> <span class='op'>/</span> <span class='int'>2</span><span class='rparen'>)</span>

    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>通常成功</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_fumble_text'>fumble_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>致命的失敗</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_fumble_text'>fumble_text</span> <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>==</span> <span class='int'>100</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&gt;=</span> <span class='int'>96</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_diff'>diff</span> <span class='op'>&lt;</span> <span class='int'>50</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_fumble_text'>fumble_text</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id identifier rubyid_fumble_text'>fumble_text</span> <span class='kw'>if</span> <span class='id identifier rubyid_fumbleable'>fumbleable</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>失敗</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getCombineRoll-instance_method">
  
    #<strong>getCombineRoll</strong>(command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 137</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getCombineRoll'>getCombineRoll</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>CBR\((\d+),(\d+)\)</span><span class='regexp_end'>/i</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_command'>command</span>

  <span class='id identifier rubyid_diff_1'>diff_1</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_diff_2'>diff_2</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='ivar'>@randomizer</span><span class='period'>.</span><span class='id identifier rubyid_roll_once'>roll_once</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_result_1'>result_1</span> <span class='op'>=</span> <span class='id identifier rubyid_getCheckResultText'>getCheckResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_diff_1'>diff_1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_result_2'>result_2</span> <span class='op'>=</span> <span class='id identifier rubyid_getCheckResultText'>getCheckResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_diff_2'>diff_2</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_successList'>successList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>決定性的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>極限的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>困難的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>通常成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_succesCount'>succesCount</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_succesCount'>succesCount</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_successList'>successList</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_result_1'>result_1</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_succesCount'>succesCount</span> <span class='op'>+=</span> <span class='int'>1</span> <span class='kw'>if</span> <span class='id identifier rubyid_successList'>successList</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_result_2'>result_2</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>succesCount</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_succesCount'>succesCount</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_rank'>rank</span> <span class='op'>=</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_succesCount'>succesCount</span> <span class='op'>&gt;=</span> <span class='int'>2</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>成功</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_succesCount'>succesCount</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>部分的成功</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>失敗</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(1d100&lt;=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_diff_1'>diff_1</span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_diff_2'>diff_2</span><span class='embexpr_end'>}</span><span class='tstring_content'>) ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total'>total</span><span class='embexpr_end'>}</span><span class='tstring_content'>[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result_1'>result_1</span><span class='embexpr_end'>}</span><span class='tstring_content'>,</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result_2'>result_2</span><span class='embexpr_end'>}</span><span class='tstring_content'>] ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_rank'>rank</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getFullAutoResult-instance_method">
  
    #<strong>getFullAutoResult</strong>(command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 167</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getFullAutoResult'>getFullAutoResult</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^FAR\((-?\d+)(,(-?\d+))(,(-?\d+))(,(-?\d+))?\)</span><span class='regexp_end'>/i</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_command'>command</span>

  <span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_diff'>diff</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_broken_number'>broken_number</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>7</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='int'>0</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># 射擊數不超過（8回*（PC技能値最大値/10））＝72的上限
</span>  <span class='id identifier rubyid_bullet_count_limit'>bullet_count_limit</span> <span class='op'>=</span> <span class='int'>100</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_bullet_count_limit'>bullet_count_limit</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n彈藥太多。請改裝填</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bullet_count_limit'>bullet_count_limit</span><span class='embexpr_end'>}</span><span class='tstring_content'>發。\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>=</span> <span class='id identifier rubyid_bullet_count_limit'>bullet_count_limit</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>正確裝填數。</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>正確目標值。</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_diff'>diff</span> <span class='op'>&lt;=</span> <span class='int'>0</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_broken_number'>broken_number</span> <span class='op'>&lt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n正確故障值。排除獎勵記號。\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_broken_number'>broken_number</span> <span class='op'>=</span> <span class='id identifier rubyid_broken_number'>broken_number</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n錯誤。獎勵、懲罰骰値為</span><span class='embexpr_beg'>#{</span><span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span><span class='embexpr_end'>}</span><span class='tstring_content'>～</span><span class='embexpr_beg'>#{</span><span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='embexpr_end'>}</span><span class='tstring_content'>です。</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>獎勵、懲罰骰値[</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='embexpr_end'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollFullAuto'>rollFullAuto</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_broken_number'>broken_number</span><span class='comma'>,</span> <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getFumbleable-instance_method">
  
    #<strong>getFumbleable</strong>(more_difficlty)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


380
381
382
383</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 380</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getFumbleable'>getFumbleable</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>
  <span class='comment'># 成功判定時因只擲出４９以下數值，而大失敗率上昇
</span>  <span class='kw'>return</span> <span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span> <span class='op'>&gt;=</span> <span class='int'>1</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getHitBulletCountBase-instance_method">
  
    #<strong>getHitBulletCountBase</strong>(diff, bullet_set_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


356
357
358
359
360
361
362
363
364</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 356</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getHitBulletCountBase'>getHitBulletCountBase</span><span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hit_bullet_count_base'>hit_bullet_count_base</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span> <span class='op'>/</span> <span class='int'>2</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span> <span class='op'>&gt;=</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span> <span class='op'>&lt;</span> <span class='int'>10</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_hit_bullet_count_base'>hit_bullet_count_base</span> <span class='op'>=</span> <span class='int'>1</span> <span class='comment'># 技能值９以下的最低限度保障處理
</span>  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_hit_bullet_count_base'>hit_bullet_count_base</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getHitResultInfos-instance_method">
  
    #<strong>getHitResultInfos</strong>(dice_num, diff, more_difficlty)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


246
247
248
249
250
251
252
253
254
255</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 246</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getHitResultInfos'>getHitResultInfos</span><span class='lparen'>(</span><span class='id identifier rubyid_dice_num'>dice_num</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_units_digit'>units_digit</span> <span class='op'>=</span> <span class='id identifier rubyid_rollPercentD10'>rollPercentD10</span>
  <span class='id identifier rubyid_total_list'>total_list</span> <span class='op'>=</span> <span class='id identifier rubyid_getTotalLists'>getTotalLists</span><span class='lparen'>(</span><span class='id identifier rubyid_dice_num'>dice_num</span><span class='comma'>,</span> <span class='id identifier rubyid_units_digit'>units_digit</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='id identifier rubyid_getTotal'>getTotal</span><span class='lparen'>(</span><span class='id identifier rubyid_total_list'>total_list</span><span class='comma'>,</span> <span class='id identifier rubyid_dice_num'>dice_num</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_fumbleable'>fumbleable</span> <span class='op'>=</span> <span class='id identifier rubyid_getFumbleable'>getFumbleable</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_hit_result'>hit_result</span> <span class='op'>=</span> <span class='id identifier rubyid_getCheckResultText'>getCheckResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_fumbleable'>fumbleable</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_hit_result'>hit_result</span><span class='comma'>,</span> <span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_total_list'>total_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getHitResultText-instance_method">
  
    #<strong>getHitResultText</strong>(output, counts)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 257</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getHitResultText'>getHitResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_counts'>counts</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_output'>output</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:hit_bullet</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>發射擊命中、</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:impale_bullet</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>射擊貫穿、剩餘彈藥</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:bullet</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_content'>發</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getHitType-instance_method">
  
    #<strong>getHitType</strong>(more_difficlty, hit_result)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


261
262
263
264
265
266
267
268</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 261</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getHitType'>getHitType</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='comma'>,</span> <span class='id identifier rubyid_hit_result'>hit_result</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_successList'>successList</span><span class='comma'>,</span> <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span> <span class='op'>=</span> <span class='id identifier rubyid_getSuccessListImpaleBulletList'>getSuccessListImpaleBulletList</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='symbol'>:hit</span> <span class='kw'>if</span> <span class='id identifier rubyid_successList'>successList</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_hit_result'>hit_result</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='symbol'>:impale</span> <span class='kw'>if</span> <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='id identifier rubyid_hit_result'>hit_result</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getLastHitBulletCount-instance_method">
  
    #<strong>getLastHitBulletCount</strong>(bullet_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 370</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getLastHitBulletCount'>getLastHitBulletCount</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='rparen'>)</span>
  <span class='comment'># 在剩餘彈藥為１的最低限度保障處理
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='kw'>return</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_count'>count</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>/</span> <span class='int'>2</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_floor'>floor</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getNextDifficltyMessage-instance_method">
  
    #<strong>getNextDifficltyMessage</strong>(more_difficlty)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


333
334
335
336
337
338
339
340
341
342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 333</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getNextDifficltyMessage'>getNextDifficltyMessage</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id identifier rubyid_more_difficlty'>more_difficlty</span>
  <span class='kw'>when</span> <span class='int'>1</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n    變更難度為困難的成功</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='int'>2</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n    變更難度為極限的成功</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='int'>3</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n    變更難度為決定性的成功</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getSetOfBullet-instance_method">
  
    #<strong>getSetOfBullet</strong>(diff)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


346
347
348
349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 346</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getSetOfBullet'>getSetOfBullet</span><span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span> <span class='op'>=</span> <span class='id identifier rubyid_diff'>diff</span> <span class='op'>/</span> <span class='int'>10</span>

  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span> <span class='op'>&gt;=</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_diff'>diff</span> <span class='op'>&lt;</span> <span class='int'>10</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span> <span class='op'>=</span> <span class='int'>1</span> <span class='comment'># 技能值９以下的最低限度保障處理
</span>  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getSuccessListImpaleBulletList-instance_method">
  
    #<strong>getSuccessListImpaleBulletList</strong>(more_difficlty)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 311</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getSuccessListImpaleBulletList'>getSuccessListImpaleBulletList</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_successList'>successList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='kw'>case</span> <span class='id identifier rubyid_more_difficlty'>more_difficlty</span>
  <span class='kw'>when</span> <span class='int'>0</span>
    <span class='id identifier rubyid_successList'>successList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>困難的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>通常成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>決定性的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>極限的成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='int'>1</span>
    <span class='id identifier rubyid_successList'>successList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>困難的成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>決定性的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>極限的成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='int'>2</span>
    <span class='id identifier rubyid_successList'>successList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>決定性的成功</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>極限的成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='int'>3</span>
    <span class='id identifier rubyid_successList'>successList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>決定性的成功</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_successList'>successList</span><span class='comma'>,</span> <span class='id identifier rubyid_impaleBulletList'>impaleBulletList</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getTotal-instance_method">
  
    #<strong>getTotal</strong>(total_list, bonus_dice_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110
111</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 107</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getTotal'>getTotal</span><span class='lparen'>(</span><span class='id identifier rubyid_total_list'>total_list</span><span class='comma'>,</span> <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_total_list'>total_list</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span> <span class='kw'>if</span> <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span> <span class='op'>&gt;=</span> <span class='int'>0</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_total_list'>total_list</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getTotalLists-instance_method">
  
    #<strong>getTotalLists</strong>(bonus_dice_count, units_digit)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96
97
98
99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getTotalLists'>getTotalLists</span><span class='lparen'>(</span><span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='comma'>,</span> <span class='id identifier rubyid_units_digit'>units_digit</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_total_list'>total_list</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_tens_digit_count'>tens_digit_count</span> <span class='op'>=</span> <span class='int'>1</span> <span class='op'>+</span> <span class='id identifier rubyid_bonus_dice_count'>bonus_dice_count</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span>
  <span class='id identifier rubyid_tens_digit_count'>tens_digit_count</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_bonus'>bonus</span> <span class='op'>=</span> <span class='id identifier rubyid_rollPercentD10'>rollPercentD10</span>
    <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_bonus'>bonus</span> <span class='op'>*</span> <span class='int'>10</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='id identifier rubyid_units_digit'>units_digit</span>
    <span class='id identifier rubyid_total'>total</span> <span class='op'>=</span> <span class='int'>100</span> <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>==</span> <span class='int'>0</span>

    <span class='id identifier rubyid_total_list'>total_list</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_total'>total</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_total_list'>total_list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="isLastBulletTurn-instance_method">
  
    #<strong>isLastBulletTurn</strong>(bullet_count, bullet_set_count)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 366</span>

<span class='kw'>def</span> <span class='id identifier rubyid_isLastBulletTurn'>isLastBulletTurn</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span> <span class='op'>-</span> <span class='id identifier rubyid_bullet_set_count'>bullet_set_count</span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='int'>0</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rollFullAuto-instance_method">
  
    #<strong>rollFullAuto</strong>(bullet_count, diff, broken_number, dice_num)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rollFullAuto'>rollFullAuto</span><span class='lparen'>(</span><span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_broken_number'>broken_number</span><span class='comma'>,</span> <span class='id identifier rubyid_dice_num'>dice_num</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_loopCount'>loopCount</span> <span class='op'>=</span> <span class='int'>0</span>

  <span class='id identifier rubyid_counts'>counts</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='label'>hit_bullet:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>impale_bullet:</span> <span class='int'>0</span><span class='comma'>,</span>
    <span class='label'>bullet:</span> <span class='id identifier rubyid_bullet_count'>bullet_count</span><span class='comma'>,</span>
  <span class='rbrace'>}</span>

  <span class='comment'># 難度變更用Lｏｏｐ
</span>  <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='op'>|</span>
    <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='id identifier rubyid_getNextDifficltyMessage'>getNextDifficltyMessage</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>

    <span class='comment'># ペナルティダイスを減らしながらロール用ループ削減獎勵骰時角色用Lｏｏｐ
</span>    <span class='kw'>while</span> <span class='id identifier rubyid_dice_num'>dice_num</span> <span class='op'>&gt;=</span> <span class='ivar'>@bonus_dice_range</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>

      <span class='id identifier rubyid_loopCount'>loopCount</span> <span class='op'>+=</span> <span class='int'>1</span>
      <span class='id identifier rubyid_hit_result'>hit_result</span><span class='comma'>,</span> <span class='id identifier rubyid_total'>total</span><span class='comma'>,</span> <span class='id identifier rubyid_total_list'>total_list</span> <span class='op'>=</span> <span class='id identifier rubyid_getHitResultInfos'>getHitResultInfos</span><span class='lparen'>(</span><span class='id identifier rubyid_dice_num'>dice_num</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='comma'>,</span> <span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_loopCount'>loopCount</span><span class='embexpr_end'>}</span><span class='tstring_content'>次: ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_total_list'>total_list</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='embexpr_end'>}</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_hit_result'>hit_result</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

      <span class='kw'>if</span> <span class='id identifier rubyid_total'>total</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_broken_number'>broken_number</span>
        <span class='id identifier rubyid_output'>output</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>卡彈</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>return</span> <span class='id identifier rubyid_getHitResultText'>getHitResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_counts'>counts</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_hit_type'>hit_type</span> <span class='op'>=</span> <span class='id identifier rubyid_getHitType'>getHitType</span><span class='lparen'>(</span><span class='id identifier rubyid_more_difficlty'>more_difficlty</span><span class='comma'>,</span> <span class='id identifier rubyid_hit_result'>hit_result</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_hit_bullet'>hit_bullet</span><span class='comma'>,</span> <span class='id identifier rubyid_impale_bullet'>impale_bullet</span><span class='comma'>,</span> <span class='id identifier rubyid_lost_bullet'>lost_bullet</span> <span class='op'>=</span> <span class='id identifier rubyid_getBulletResults'>getBulletResults</span><span class='lparen'>(</span><span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:bullet</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_hit_type'>hit_type</span><span class='comma'>,</span> <span class='id identifier rubyid_diff'>diff</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:hit_bullet</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_hit_bullet'>hit_bullet</span>
      <span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:impale_bullet</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='id identifier rubyid_impale_bullet'>impale_bullet</span>
      <span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:bullet</span><span class='rbracket'>]</span> <span class='op'>-=</span> <span class='id identifier rubyid_lost_bullet'>lost_bullet</span>

      <span class='kw'>return</span> <span class='id identifier rubyid_getHitResultText'>getHitResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_counts'>counts</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_counts'>counts</span><span class='lbracket'>[</span><span class='symbol'>:bullet</span><span class='rbracket'>]</span> <span class='op'>&lt;=</span> <span class='int'>0</span>

      <span class='id identifier rubyid_dice_num'>dice_num</span> <span class='op'>-=</span> <span class='int'>1</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_dice_num'>dice_num</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_getHitResultText'>getHitResultText</span><span class='lparen'>(</span><span class='id identifier rubyid_output'>output</span><span class='comma'>,</span> <span class='id identifier rubyid_counts'>counts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rollPercentD10-instance_method">
  
    #<strong>rollPercentD10</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/Cthulhu7th_ChineseTraditional.rb', line 85</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rollPercentD10'>rollPercentD10</span>
  <span class='id identifier rubyid_dice'>dice</span> <span class='op'>=</span> <span class='ivar'>@randomizer</span><span class='period'>.</span><span class='id identifier rubyid_roll_once'>roll_once</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_dice'>dice</span> <span class='op'>=</span> <span class='int'>0</span> <span class='kw'>if</span> <span class='id identifier rubyid_dice'>dice</span> <span class='op'>==</span> <span class='int'>10</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_dice'>dice</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed May  4 13:01:24 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.26 (ruby-2.7.1).
</div>

    </div>
  </body>
</html>