<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: BCDice::GameSystem::EarthDawn
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "BCDice::GameSystem::EarthDawn";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (E)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../BCDice.html" title="BCDice (module)">BCDice</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../GameSystem.html" title="BCDice::GameSystem (module)">GameSystem</a></span></span>
     &raquo; 
    <span class="title">EarthDawn</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: BCDice::GameSystem::EarthDawn
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></li>
          
            <li class="next">BCDice::GameSystem::EarthDawn</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/bcdice/game_system/EarthDawn.rb</dd>
  </dl>
  
</div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="EarthDawn3.html" title="BCDice::GameSystem::EarthDawn3 (class)">EarthDawn3</a></span>, <span class='object_link'><a href="EarthDawn4.html" title="BCDice::GameSystem::EarthDawn4 (class)">EarthDawn4</a></span></p>
</div>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="ID-constant" class="">ID =
          <div class="docstring">
  <div class="discussion">
    
<p>ゲームシステムの識別子</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>EarthDawn</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="NAME-constant" class="">NAME =
          <div class="docstring">
  <div class="discussion">
    
<p>ゲームシステム名</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>アースドーン</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="SORT_KEY-constant" class="">SORT_KEY =
          <div class="docstring">
  <div class="discussion">
    
<p>ゲームシステム名の読みがな</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>ああすとおん</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="HELP_MESSAGE-constant" class="">HELP_MESSAGE =
          <div class="docstring">
  <div class="discussion">
    
<p>ダイスボットの使い方</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='heredoc_beg'>&lt;&lt;~INFO_MESSAGE_TEXT</span>
<span class='tstring_content'>  ステップダイス　(xEn+k)
</span><span class='tstring_content'>  ステップx、目標値n(省略可能）、カルマダイスk(D2-D20)でステップダイスをロールします。
</span><span class='tstring_content'>  振り足しも自動。
</span><span class='tstring_content'>  例）9E　10E8　10E+D12
</span><span class='heredoc_end'>INFO_MESSAGE_TEXT</span></pre></dd>
      
    </dl>
  






  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Base.html#d66_sort_type-instance_method" title="BCDice::Base#d66_sort_type (method)">#d66_sort_type</a></span>, <span class='object_link'><a href="../Base.html#default_cmp_op-instance_method" title="BCDice::Base#default_cmp_op (method)">#default_cmp_op</a></span>, <span class='object_link'><a href="../Base.html#default_target_number-instance_method" title="BCDice::Base#default_target_number (method)">#default_target_number</a></span>, <span class='object_link'><a href="../Base.html#randomizer-instance_method" title="BCDice::Base#randomizer (method)">#randomizer</a></span>, <span class='object_link'><a href="../Base.html#reroll_dice_reroll_threshold-instance_method" title="BCDice::Base#reroll_dice_reroll_threshold (method)">#reroll_dice_reroll_threshold</a></span>, <span class='object_link'><a href="../Base.html#round_type-instance_method" title="BCDice::Base#round_type (method)">#round_type</a></span>, <span class='object_link'><a href="../Base.html#sides_implicit_d-instance_method" title="BCDice::Base#sides_implicit_d (method)">#sides_implicit_d</a></span>, <span class='object_link'><a href="../Base.html#upper_dice_reroll_threshold-instance_method" title="BCDice::Base#upper_dice_reroll_threshold (method)">#upper_dice_reroll_threshold</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ed_step-instance_method" title="#ed_step (instance method)">#<strong>ed_step</strong>(str)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>アースドーンステップ表.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eval_game_system_specific_command-instance_method" title="#eval_game_system_specific_command (instance method)">#<strong>eval_game_system_specific_command</strong>(command)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getStepResult-instance_method" title="#getStepResult (instance method)">#<strong>getStepResult</strong>(str)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getStepTable-instance_method" title="#getStepTable (instance method)">#<strong>getStepTable</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(command)  &#x21d2; EarthDawn </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of EarthDawn.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rollStep-instance_method" title="#rollStep (instance method)">#<strong>rollStep</strong>(diceType, diceCount)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>　 ステップ34xのダイス + [(xx-45)/11]d20 + <a href="(xx-34)を11で割った余り+3">ステップ</a>のダイス.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Base.html" title="BCDice::Base (class)">Base</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Base.html#change_text-instance_method" title="BCDice::Base#change_text (method)">#change_text</a></span>, <span class='object_link'><a href="../Base.html#check_result-instance_method" title="BCDice::Base#check_result (method)">#check_result</a></span>, <span class='object_link'><a href="../Base.html#command_pattern-class_method" title="BCDice::Base.command_pattern (method)">command_pattern</a></span>, <span class='object_link'><a href="../Base.html#enable_debug-instance_method" title="BCDice::Base#enable_debug (method)">#enable_debug</a></span>, <span class='object_link'><a href="../Base.html#enabled_d9%3F-instance_method" title="BCDice::Base#enabled_d9? (method)">#enabled_d9?</a></span>, <span class='object_link'><a href="../Base.html#eval-class_method" title="BCDice::Base.eval (method)">eval</a></span>, <span class='object_link'><a href="../Base.html#eval-instance_method" title="BCDice::Base#eval (method)">#eval</a></span>, <span class='object_link'><a href="../Base.html#grich_text-instance_method" title="BCDice::Base#grich_text (method)">#grich_text</a></span>, <span class='object_link'><a href="../Base.html#prefixes_pattern-class_method" title="BCDice::Base.prefixes_pattern (method)">prefixes_pattern</a></span>, <span class='object_link'><a href="../Base.html#register_prefix-class_method" title="BCDice::Base.register_prefix (method)">register_prefix</a></span>, <span class='object_link'><a href="../Base.html#register_prefix_from_super_class-class_method" title="BCDice::Base.register_prefix_from_super_class (method)">register_prefix_from_super_class</a></span>, <span class='object_link'><a href="../Base.html#sort_add_dice%3F-instance_method" title="BCDice::Base#sort_add_dice? (method)">#sort_add_dice?</a></span>, <span class='object_link'><a href="../Base.html#sort_barabara_dice%3F-instance_method" title="BCDice::Base#sort_barabara_dice? (method)">#sort_barabara_dice?</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../Translate.html" title="BCDice::Translate (module)">Translate</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Translate.html#translate-instance_method" title="BCDice::Translate#translate (method)">#translate</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(command)  &#x21d2; <tt><span class='object_link'><a href="" title="BCDice::GameSystem::EarthDawn (class)">EarthDawn</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of EarthDawn.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/EarthDawn.rb', line 25</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>

  <span class='ivar'>@sort_add_dice</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="ed_step-instance_method">
  
    #<strong>ed_step</strong>(str)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>アースドーンステップ表</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/EarthDawn.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ed_step'>ed_step</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='id identifier rubyid_getStepResult'>getStepResult</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="eval_game_system_specific_command-instance_method">
  
    #<strong>eval_game_system_specific_command</strong>(command)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/EarthDawn.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_eval_game_system_specific_command'>eval_game_system_specific_command</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_ed_step'>ed_step</span><span class='lparen'>(</span><span class='id identifier rubyid_command'>command</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getStepResult-instance_method">
  
    #<strong>getStepResult</strong>(str)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/EarthDawn.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getStepResult'>getStepResult</span><span class='lparen'>(</span><span class='id identifier rubyid_str'>str</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\d+)E(\d+)?(\+)?(\d+)?(d\d+)?</span><span class='regexp_end'>/i</span></span> <span class='op'>=~</span> <span class='id identifier rubyid_str'>str</span>

  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@isFailed</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='id identifier rubyid_step'>step</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='comment'># ステップ
</span>  <span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>=</span> <span class='int'>0</span> <span class='comment'># 目標値
</span>  <span class='id identifier rubyid_hasKarmaDice'>hasKarmaDice</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='comment'># カルマダイスの有無
</span>  <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span> <span class='op'>=</span> <span class='int'>0</span> <span class='comment'># カルマダイスの個数又は修正
</span>  <span class='id identifier rubyid_karmaDiceType'>karmaDiceType</span> <span class='op'>=</span> <span class='int'>0</span> <span class='comment'># カルマダイスの種類
</span>
  <span class='comment'># 空値があった時の為のばんぺいくんRX
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_step'>step</span> <span class='op'>&gt;</span> <span class='int'>40</span>
    <span class='id identifier rubyid_step'>step</span> <span class='op'>=</span> <span class='int'>40</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
    <span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>=</span> <span class='int'>42</span> <span class='kw'>if</span> <span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>&gt;</span> <span class='int'>43</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_hasKarmaDice'>hasKarmaDice</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='kw'>if</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_karmaDiceType'>karmaDiceType</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id identifier rubyid_last_match'>last_match</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span>

  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>&lt;</span> <span class='int'>0</span>

  <span class='id identifier rubyid_stable'>stable</span> <span class='op'>=</span> <span class='id identifier rubyid_getStepTable'>getStepTable</span><span class='lparen'>(</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_nmod'>nmod</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d20step'>d20step</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d12step'>d12step</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d10step'>d10step</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>3</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d8step'>d8step</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>4</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d6step'>d6step</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>5</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d4step'>d4step</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>6</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_step'>step</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_hasKarmaDice'>hasKarmaDice</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_karmaDiceType'>karmaDiceType</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d20</span><span class='regexp_end'>/i</span></span>
      <span class='id identifier rubyid_d20step'>d20step</span> <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d12</span><span class='regexp_end'>/i</span></span>
      <span class='id identifier rubyid_d12step'>d12step</span> <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d10</span><span class='regexp_end'>/i</span></span>
      <span class='id identifier rubyid_d10step'>d10step</span> <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d8</span><span class='regexp_end'>/i</span></span>
      <span class='id identifier rubyid_d8step'>d8step</span>  <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d6</span><span class='regexp_end'>/i</span></span>
      <span class='id identifier rubyid_d6step'>d6step</span>  <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>d4</span><span class='regexp_end'>/i</span></span>
      <span class='id identifier rubyid_d4step'>d4step</span>  <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_nmod'>nmod</span> <span class='op'>+=</span> <span class='id identifier rubyid_karmaDiceCount'>karmaDiceCount</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='ivar'>@string</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>d20step, d12step, d10step, d8step, d6step, d4step</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_d20step'>d20step</span><span class='comma'>,</span> <span class='id identifier rubyid_d12step'>d12step</span><span class='comma'>,</span> <span class='id identifier rubyid_d10step'>d10step</span><span class='comma'>,</span> <span class='id identifier rubyid_d8step'>d8step</span><span class='comma'>,</span> <span class='id identifier rubyid_d6step'>d6step</span><span class='comma'>,</span> <span class='id identifier rubyid_d4step'>d4step</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='int'>20</span><span class='comma'>,</span> <span class='id identifier rubyid_d20step'>d20step</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='int'>12</span><span class='comma'>,</span> <span class='id identifier rubyid_d12step'>d12step</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='int'>10</span><span class='comma'>,</span> <span class='id identifier rubyid_d10step'>d10step</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='int'>8</span><span class='comma'>,</span>  <span class='id identifier rubyid_d8step'>d8step</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='int'>6</span><span class='comma'>,</span>  <span class='id identifier rubyid_d6step'>d6step</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='int'>4</span><span class='comma'>,</span>  <span class='id identifier rubyid_d4step'>d4step</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_nmod'>nmod</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='comment'># 修正分の適用
</span>    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_nmod'>nmod</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='id identifier rubyid_nmod'>nmod</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
    <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_nmod'>nmod</span>
  <span class='kw'>end</span>

  <span class='comment'># ステップ判定終了
</span>  <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_stepTotal'>stepTotal</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ステップ</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_step'>step</span><span class='embexpr_end'>}</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='ivar'>@string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span> <span class='kw'>if</span> <span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>==</span> <span class='int'>0</span>

  <span class='comment'># 結果判定
</span>  <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> ＞ </span><span class='tstring_end'>&#39;</span></span>

  <span class='id identifier rubyid_excelentSuccessNumber'>excelentSuccessNumber</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>7</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_superSuccessNumber'>superSuccessNumber</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>8</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_goodSuccessNumber'>goodSuccessNumber</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>9</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_failedNumber'>failedNumber</span> <span class='op'>=</span> <span class='id identifier rubyid_stable'>stable</span><span class='lbracket'>[</span><span class='int'>11</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_targetNumber'>targetNumber</span> <span class='op'>-</span> <span class='int'>1</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='ivar'>@isFailed</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>自動失敗</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_excelentSuccessNumber'>excelentSuccessNumber</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>最良成功</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_superSuccessNumber'>superSuccessNumber</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>優成功</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_goodSuccessNumber'>goodSuccessNumber</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>良成功</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_targetNumber'>targetNumber</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>成功</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_failedNumber'>failedNumber</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>大失敗</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>失敗</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_output'>output</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ステップ</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_step'>step</span><span class='embexpr_end'>}</span><span class='tstring_content'>&gt;=</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_targetNumber'>targetNumber</span><span class='embexpr_end'>}</span><span class='tstring_content'> ＞ </span><span class='embexpr_beg'>#{</span><span class='ivar'>@string</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_output'>output</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="getStepTable-instance_method">
  
    #<strong>getStepTable</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/EarthDawn.rb', line 154</span>

<span class='kw'>def</span> <span class='id identifier rubyid_getStepTable'>getStepTable</span>
  <span class='comment'># 表      1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 34x 3x 4x 5x 6x 7x 8x 9x10x11x12x13x
</span>
  <span class='id identifier rubyid_mod'>mod</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d20'>d20</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d12'>d12</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d10'>d10</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d8'>d8</span>  <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d6'>d6</span>  <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_d4'>d4</span>  <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span> <span class='int'>0</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_exsuc'>exsuc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>6</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>14</span><span class='comma'>,</span> <span class='int'>17</span><span class='comma'>,</span> <span class='int'>19</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>22</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='int'>27</span><span class='comma'>,</span> <span class='int'>29</span><span class='comma'>,</span> <span class='int'>32</span><span class='comma'>,</span> <span class='int'>33</span><span class='comma'>,</span> <span class='int'>35</span><span class='comma'>,</span> <span class='int'>37</span><span class='comma'>,</span> <span class='int'>38</span><span class='comma'>,</span> <span class='int'>39</span><span class='comma'>,</span> <span class='int'>41</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>44</span><span class='comma'>,</span> <span class='int'>45</span><span class='comma'>,</span> <span class='int'>47</span><span class='comma'>,</span> <span class='int'>48</span><span class='comma'>,</span> <span class='int'>49</span><span class='comma'>,</span> <span class='int'>51</span><span class='comma'>,</span> <span class='int'>52</span><span class='comma'>,</span> <span class='int'>54</span><span class='comma'>,</span> <span class='int'>55</span><span class='comma'>,</span> <span class='int'>56</span><span class='comma'>,</span> <span class='int'>58</span><span class='comma'>,</span> <span class='int'>59</span><span class='comma'>,</span> <span class='int'>60</span><span class='comma'>,</span> <span class='int'>62</span><span class='comma'>,</span> <span class='int'>64</span><span class='comma'>,</span> <span class='int'>65</span><span class='comma'>,</span> <span class='int'>67</span><span class='comma'>,</span> <span class='int'>68</span><span class='comma'>,</span> <span class='int'>70</span><span class='comma'>,</span> <span class='int'>71</span><span class='comma'>,</span> <span class='int'>72</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ssuc'>ssuc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>4</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>13</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>16</span><span class='comma'>,</span> <span class='int'>18</span><span class='comma'>,</span> <span class='int'>19</span><span class='comma'>,</span> <span class='int'>21</span><span class='comma'>,</span> <span class='int'>22</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='int'>27</span><span class='comma'>,</span> <span class='int'>29</span><span class='comma'>,</span> <span class='int'>30</span><span class='comma'>,</span> <span class='int'>32</span><span class='comma'>,</span> <span class='int'>33</span><span class='comma'>,</span> <span class='int'>34</span><span class='comma'>,</span> <span class='int'>35</span><span class='comma'>,</span> <span class='int'>37</span><span class='comma'>,</span> <span class='int'>38</span><span class='comma'>,</span> <span class='int'>40</span><span class='comma'>,</span> <span class='int'>41</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>43</span><span class='comma'>,</span> <span class='int'>45</span><span class='comma'>,</span> <span class='int'>46</span><span class='comma'>,</span> <span class='int'>47</span><span class='comma'>,</span> <span class='int'>48</span><span class='comma'>,</span> <span class='int'>49</span><span class='comma'>,</span> <span class='int'>51</span><span class='comma'>,</span> <span class='int'>52</span><span class='comma'>,</span> <span class='int'>53</span><span class='comma'>,</span> <span class='int'>55</span><span class='comma'>,</span> <span class='int'>56</span><span class='comma'>,</span> <span class='int'>58</span><span class='comma'>,</span> <span class='int'>59</span><span class='comma'>,</span> <span class='int'>60</span><span class='comma'>,</span> <span class='int'>61</span><span class='comma'>,</span> <span class='int'>62</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_gsuc'>gsuc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>13</span><span class='comma'>,</span> <span class='int'>14</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>17</span><span class='comma'>,</span> <span class='int'>18</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>21</span><span class='comma'>,</span> <span class='int'>22</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='int'>27</span><span class='comma'>,</span> <span class='int'>28</span><span class='comma'>,</span> <span class='int'>29</span><span class='comma'>,</span> <span class='int'>31</span><span class='comma'>,</span> <span class='int'>32</span><span class='comma'>,</span> <span class='int'>33</span><span class='comma'>,</span> <span class='int'>34</span><span class='comma'>,</span> <span class='int'>35</span><span class='comma'>,</span> <span class='int'>36</span><span class='comma'>,</span> <span class='int'>38</span><span class='comma'>,</span> <span class='int'>39</span><span class='comma'>,</span> <span class='int'>40</span><span class='comma'>,</span> <span class='int'>41</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span> <span class='int'>43</span><span class='comma'>,</span> <span class='int'>45</span><span class='comma'>,</span> <span class='int'>46</span><span class='comma'>,</span> <span class='int'>47</span><span class='comma'>,</span> <span class='int'>48</span><span class='comma'>,</span> <span class='int'>50</span><span class='comma'>,</span> <span class='int'>51</span><span class='comma'>,</span> <span class='int'>52</span><span class='comma'>,</span> <span class='int'>53</span><span class='comma'>,</span> <span class='int'>54</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_nsuc'>nsuc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>13</span><span class='comma'>,</span> <span class='int'>14</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>16</span><span class='comma'>,</span> <span class='int'>17</span><span class='comma'>,</span> <span class='int'>18</span><span class='comma'>,</span> <span class='int'>19</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>21</span><span class='comma'>,</span> <span class='int'>22</span><span class='comma'>,</span> <span class='int'>23</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='int'>27</span><span class='comma'>,</span> <span class='int'>28</span><span class='comma'>,</span> <span class='int'>29</span><span class='comma'>,</span> <span class='int'>30</span><span class='comma'>,</span> <span class='int'>31</span><span class='comma'>,</span> <span class='int'>32</span><span class='comma'>,</span> <span class='int'>33</span><span class='comma'>,</span> <span class='int'>34</span><span class='comma'>,</span> <span class='int'>35</span><span class='comma'>,</span> <span class='int'>36</span><span class='comma'>,</span> <span class='int'>37</span><span class='comma'>,</span> <span class='int'>38</span><span class='comma'>,</span> <span class='int'>39</span><span class='comma'>,</span> <span class='int'>40</span><span class='comma'>,</span> <span class='int'>41</span><span class='comma'>,</span> <span class='int'>42</span><span class='comma'>,</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_fsuc'>fsuc</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='int'>3</span><span class='comma'>,</span> <span class='int'>4</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>6</span><span class='comma'>,</span> <span class='int'>7</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='int'>9</span><span class='comma'>,</span> <span class='int'>10</span><span class='comma'>,</span> <span class='int'>11</span><span class='comma'>,</span> <span class='int'>12</span><span class='comma'>,</span> <span class='int'>13</span><span class='comma'>,</span> <span class='int'>13</span><span class='comma'>,</span> <span class='int'>14</span><span class='comma'>,</span> <span class='int'>15</span><span class='comma'>,</span> <span class='int'>16</span><span class='comma'>,</span> <span class='int'>17</span><span class='comma'>,</span> <span class='int'>18</span><span class='comma'>,</span> <span class='int'>18</span><span class='comma'>,</span> <span class='int'>18</span><span class='comma'>,</span> <span class='int'>20</span><span class='comma'>,</span> <span class='int'>21</span><span class='comma'>,</span> <span class='int'>22</span><span class='comma'>,</span> <span class='int'>23</span><span class='comma'>,</span> <span class='int'>23</span><span class='comma'>,</span> <span class='int'>24</span><span class='comma'>,</span> <span class='int'>25</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='int'>26</span><span class='comma'>,</span> <span class='int'>27</span><span class='comma'>,</span> <span class='int'>28</span><span class='comma'>,</span> <span class='int'>29</span><span class='comma'>,</span> <span class='int'>30</span><span class='comma'>,</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_stable'>stable</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_mod'>mod</span><span class='comma'>,</span> <span class='id identifier rubyid_d20'>d20</span><span class='comma'>,</span> <span class='id identifier rubyid_d12'>d12</span><span class='comma'>,</span> <span class='id identifier rubyid_d10'>d10</span><span class='comma'>,</span> <span class='id identifier rubyid_d8'>d8</span><span class='comma'>,</span> <span class='id identifier rubyid_d6'>d6</span><span class='comma'>,</span> <span class='id identifier rubyid_d4'>d4</span><span class='comma'>,</span> <span class='id identifier rubyid_exsuc'>exsuc</span><span class='comma'>,</span> <span class='id identifier rubyid_ssuc'>ssuc</span><span class='comma'>,</span> <span class='id identifier rubyid_gsuc'>gsuc</span><span class='comma'>,</span> <span class='id identifier rubyid_nsuc'>nsuc</span><span class='comma'>,</span> <span class='id identifier rubyid_fsuc'>fsuc</span><span class='rbracket'>]</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_stable'>stable</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rollStep-instance_method">
  
    #<strong>rollStep</strong>(diceType, diceCount)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>　 ステップ34xのダイス+ [(xx-45)/11]d20 + <a href="(xx-34)を11で割った余り+3">ステップ</a>のダイス</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/bcdice/game_system/EarthDawn.rb', line 186</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rollStep'>rollStep</span><span class='lparen'>(</span><span class='id identifier rubyid_diceType'>diceType</span><span class='comma'>,</span> <span class='id identifier rubyid_diceCount'>diceCount</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rollStep diceType, diceCount, @string</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_diceType'>diceType</span><span class='comma'>,</span> <span class='id identifier rubyid_diceCount'>diceCount</span><span class='comma'>,</span> <span class='ivar'>@string</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='kw'>unless</span> <span class='id identifier rubyid_diceCount'>diceCount</span> <span class='op'>&gt;</span> <span class='int'>0</span>

  <span class='comment'># diceぶんのステップ判定
</span>
  <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='ivar'>@string</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_diceCount'>diceCount</span><span class='embexpr_end'>}</span><span class='tstring_content'>d</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_diceType'>diceType</span><span class='embexpr_end'>}</span><span class='tstring_content'>[</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rollStep @string</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='ivar'>@string</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_diceCount'>diceCount</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_dice_now'>dice_now</span> <span class='op'>=</span> <span class='ivar'>@randomizer</span><span class='period'>.</span><span class='id identifier rubyid_roll_once'>roll_once</span><span class='lparen'>(</span><span class='id identifier rubyid_diceType'>diceType</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_dice_now'>dice_now</span> <span class='op'>!=</span> <span class='int'>1</span>
      <span class='ivar'>@isFailed</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_dice_in'>dice_in</span> <span class='op'>=</span> <span class='id identifier rubyid_dice_now'>dice_now</span>

    <span class='kw'>while</span> <span class='id identifier rubyid_dice_now'>dice_now</span> <span class='op'>==</span> <span class='id identifier rubyid_diceType'>diceType</span>
      <span class='id identifier rubyid_dice_now'>dice_now</span> <span class='op'>=</span> <span class='ivar'>@randomizer</span><span class='period'>.</span><span class='id identifier rubyid_roll_once'>roll_once</span><span class='lparen'>(</span><span class='id identifier rubyid_diceType'>diceType</span><span class='rparen'>)</span>

      <span class='id identifier rubyid_dice_in'>dice_in</span> <span class='op'>+=</span> <span class='id identifier rubyid_dice_now'>dice_now</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_stepTotal'>stepTotal</span> <span class='op'>+=</span> <span class='id identifier rubyid_dice_in'>dice_in</span>

    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>,</span><span class='tstring_end'>&#39;</span></span> <span class='kw'>if</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='id identifier rubyid_dice_in'>dice_in</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
  <span class='kw'>end</span>

  <span class='ivar'>@string</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>return</span> <span class='id identifier rubyid_stepTotal'>stepTotal</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Feb  8 21:19:42 2024 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.3.0).
</div>

    </div>
  </body>
</html>